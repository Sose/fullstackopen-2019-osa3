(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,n,t){e.exports=t(39)},19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(4),r=t(2),o=t(0),i=t.n(o),c=t(12),u=t.n(c),l=(t(19),t(3)),m=t.n(l),s="/api/persons",f=function(){return m.a.get(s)},d=function(e){return m.a.post(s,e)},p=function(e,n){return m.a.put("".concat(s,"/").concat(e),n)},v=function(e){return m.a.delete("".concat(s,"/").concat(e))},b=function(e){var n=e.notification,t=n.message,a=n.type;return null===t?null:"notification"===a?i.a.createElement("div",{className:"notification"},t):"error"===a?i.a.createElement("div",{className:"error"},t):(console.log("Notification: wrong type",a,"message was",t),null)},g=function(e){var n=e.person;return i.a.createElement("div",null,n.name," ",n.number)},h=function(e){var n=e.persons,t=e.filter,a=e.onDeleteClick,r=n.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())});return i.a.createElement("div",null,r.map(function(e){return i.a.createElement("div",{key:e.id},i.a.createElement(g,{person:e}),i.a.createElement("button",{onClick:a(e.id)},"poista"))}))},E=function(e){var n=e.filter,t=e.handleFilterChange;return i.a.createElement("p",null,"Rajaa n\xe4ytett\xe4vi\xe4",i.a.createElement("input",{value:n,onChange:t}))},j=function(e){var n=e.addPerson,t=e.newName,a=e.handleNameChange,r=e.newNumber,o=e.handleNumberChange;return i.a.createElement("form",{onSubmit:n},i.a.createElement("div",null,"nimi: ",i.a.createElement("input",{value:t,onChange:a})),i.a.createElement("div",null,"numero: ",i.a.createElement("input",{value:r,onChange:o})),i.a.createElement("div",null,i.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))};u.a.render(i.a.createElement(function(){var e=Object(o.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],u=Object(o.useState)(""),l=Object(r.a)(u,2),m=l[0],s=l[1],g=Object(o.useState)(""),w=Object(r.a)(g,2),O=w[0],C=w[1],y=Object(o.useState)(""),N=Object(r.a)(y,2),k=N[0],P=N[1],S=Object(o.useState)({message:null,type:null}),L=Object(r.a)(S,2),D=L[0],x=L[1];Object(o.useEffect)(function(){f().then(function(e){console.log("promise fulfilled",e),c(e.data)})},[]);var F=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;x(e),setTimeout(function(){x({message:null,type:null})},n)};return i.a.createElement("div",null,i.a.createElement("h2",null,"Puhelinluettelo"),i.a.createElement(b,{notification:D}),i.a.createElement(E,{filter:m,handleFilterChange:function(e){s(e.target.value)}}),i.a.createElement("h3",null,"Lis\xe4\xe4 uusi"),i.a.createElement(j,{addPerson:function(e){if(e.preventDefault(),""!==O){var n={name:O,number:k},r=t.find(function(e){return e.name===O});r?window.confirm("".concat(r.name," on jo luettelossa, korvataanko numero uudella?"))&&p(r.id,n).then(function(e){console.log("update res",e);var n=Object(a.a)(t),o=e.data,i=o.name,u=o.number,l=o.id,m=n.indexOf(r);n[m]={name:i,number:u,id:l},c(n),C(""),P(""),F({message:"P\xe4ivitettiin ".concat(i,", uusi numero on ").concat(u),type:"notification"},3e3)}).catch(function(e){F({message:"Henkil\xf6 ".concat(r.name," oli jo poistettu"),type:"error"},3e3);var n=Object(a.a)(t);n=n.filter(function(e){return e.name!==r.name}),c(n)}):d(n).then(function(e){var n=Object(a.a)(t),r=e.data,o=r.name,i=r.number,u=r.id;n.push({name:o,number:i,id:u}),c(n),C(""),P(""),F({message:"Lis\xe4ttiin ".concat(o," numerolla ").concat(i),type:"notification"},3e3)}).catch(function(e){var n=e.response.data.error;F({message:n,type:"error"},5e3)})}},newName:O,handleNameChange:function(e){C(e.target.value)},newNumber:k,handleNumberChange:function(e){P(e.target.value)}}),i.a.createElement("h3",null,"Numerot"),i.a.createElement(h,{persons:t,filter:m,onDeleteClick:function(e){return function(){console.log("deleteClick",e);var n=t.find(function(n){return n.id===e}).name;window.confirm("Poistetaanko ".concat(n,"?"))&&v(e).then(function(e){var r=Object(a.a)(t);r=r.filter(function(e){return e.name!==n}),c(r),F({message:"Poistettiin ".concat(n),type:"notification"},3e3)})}}}))},null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.74f6cfe3.chunk.js.map